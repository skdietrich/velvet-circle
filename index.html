<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#0a0a0a">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Velvet Circle | Elite Lifestyle</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <style>
        :root {
            --gold: #D4AF37;
            --gold-dim: #8a701e;
            --bg-dark: #050505;
            --bg-panel: #121212;
            --border: #222;
            --text-main: #e0e0e0;
            --text-muted: #888;
            --safe-bottom: env(safe-area-inset-bottom);
        }

        /* ‚îÄ‚îÄ‚îÄ RESET ‚îÄ‚îÄ‚îÄ */
        * { box-sizing: border-box; outline: none; -webkit-tap-highlight-color: transparent; }
        body { 
            margin: 0; background: var(--bg-dark); color: var(--text-main);
            font-family: 'Lato', sans-serif; font-size: 16px; height: 100vh; overflow: hidden;
        }
        h1, h2, h3, h4 { font-family: 'Cinzel', serif; margin: 0; font-weight: 400; color: var(--gold); }
        button { cursor: pointer; border: none; font-family: 'Lato', sans-serif; }
        img { display: block; max-width: 100%; }

        /* ‚îÄ‚îÄ‚îÄ UTILS ‚îÄ‚îÄ‚îÄ */
        .flex { display: flex; align-items: center; }
        .justify-between { justify-content: space-between; }
        .gap-10 { gap: 10px; }
        .w-full { width: 100%; }
        .text-center { text-align: center; }
        .fade-in { animation: fadeIn 0.3s ease-out; }
        @keyframes fadeIn { from{opacity:0;transform:translateY(5px);} to{opacity:1;transform:translateY(0);} }

        /* ‚îÄ‚îÄ‚îÄ UI COMPONENTS ‚îÄ‚îÄ‚îÄ */
        .btn-gold {
            background: linear-gradient(135deg, var(--gold), var(--gold-dim));
            color: #000; font-weight: 700; text-transform: uppercase; padding: 12px 20px; 
            border-radius: 4px; font-size: 12px; letter-spacing: 1px;
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.2); transition: 0.2s;
        }
        .btn-gold:active { transform: scale(0.98); }
        
        .btn-icon { background: rgba(255,255,255,0.1); color: #fff; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 18px; transition: 0.2s; }
        .btn-icon:hover { background: var(--gold); color: #000; }

        .input-field {
            background: #1a1a1a; border: 1px solid #333; color: #fff;
            width: 100%; padding: 14px; border-radius: 4px; font-size: 16px; margin-bottom: 10px;
        }
        .input-field:focus { border-color: var(--gold); }

        /* ‚îÄ‚îÄ‚îÄ FUNNEL ‚îÄ‚îÄ‚îÄ */
        .funnel-bg { position: fixed; inset: 0; z-index: 0; background: url('https://cdni.pornpics.com/1280/1/86/13388789/13388789_001_c465.jpg') no-repeat center center/cover; }
        .funnel-overlay { position: fixed; inset: 0; z-index: 1; background: linear-gradient(to top, #000 0%, rgba(0,0,0,0.95) 40%, rgba(0,0,0,0.6) 100%); }
        .funnel-container { position: relative; z-index: 10; height: 100vh; display: flex; align-items: center; justify-content: center; padding: 20px; }
        .funnel-card { background: rgba(18,18,18,0.95); backdrop-filter: blur(15px); padding: 40px 30px; border-radius: 8px; border-top: 4px solid var(--gold); width: 100%; max-width: 450px; }

        /* ‚îÄ‚îÄ‚îÄ DASHBOARD LAYOUT ‚îÄ‚îÄ‚îÄ */
        .app-shell { display: flex; height: 100vh; background: #000; }
        .sidebar { width: 260px; border-right: 1px solid var(--border); display: flex; flex-direction: column; background: #080808; }
        .nav-item { padding: 15px 25px; color: #aaa; cursor: pointer; display: flex; align-items: center; gap: 15px; transition: 0.2s; font-size: 14px; }
        .nav-item:hover, .nav-item.active { color: var(--gold); background: rgba(212,175,55,0.05); border-right: 3px solid var(--gold); }
        
        .main-view { flex: 1; display: flex; flex-direction: column; position: relative; overflow: hidden; }
        .top-bar { height: 60px; border-bottom: 1px solid var(--border); display: flex; align-items: center; justify-content: space-between; padding: 0 20px; background: rgba(10,10,10,0.95); z-index: 20; }
        .content-scroll { flex: 1; overflow-y: auto; padding: 20px; padding-bottom: 100px; }

        /* ‚îÄ‚îÄ‚îÄ CARDS ‚îÄ‚îÄ‚îÄ */
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 20px; }
        .member-card { background: var(--bg-panel); border: 1px solid var(--border); border-radius: 6px; overflow: hidden; position: relative; cursor: pointer; transition: 0.2s; }
        .card-img { width: 100%; height: 260px; object-fit: cover; }
        .card-info { padding: 15px; position: absolute; bottom: 0; width: 100%; background: linear-gradient(to top, rgba(0,0,0,0.95), transparent); }
        .online-dot { width: 8px; height: 8px; background: #2ecc71; border-radius: 50%; display: inline-block; margin-right: 6px; box-shadow: 0 0 5px #2ecc71; }

        /* ‚îÄ‚îÄ‚îÄ TRAVEL WIDGET ‚îÄ‚îÄ‚îÄ */
        .travel-tag { background: rgba(212, 175, 55, 0.2); color: var(--gold); padding: 4px 8px; border-radius: 4px; font-size: 10px; text-transform: uppercase; margin-bottom: 5px; display: inline-block; border: 1px solid var(--gold); }
        
        /* ‚îÄ‚îÄ‚îÄ CHAT & ACTIONS ‚îÄ‚îÄ‚îÄ */
        .chat-layout { display: flex; height: 100%; }
        .chat-list { width: 300px; border-right: 1px solid var(--border); overflow-y: auto; background: #0a0a0a; }
        .chat-item { padding: 15px; border-bottom: 1px solid var(--border); cursor: pointer; display: flex; gap: 15px; align-items: center; }
        .chat-item:hover, .chat-item.active { background: #151515; }
        .chat-window { flex: 1; display: flex; flex-direction: column; background: #000; position: relative; }
        .msg-area { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 10px; }
        .msg-bubble { max-width: 70%; padding: 10px 15px; border-radius: 12px; font-size: 14px; line-height: 1.4; }
        .msg-me { align-self: flex-end; background: var(--gold); color: #000; border-bottom-right-radius: 2px; }
        .msg-them { align-self: flex-start; background: #222; color: #fff; border-bottom-left-radius: 2px; }
        .msg-system { align-self: center; background: rgba(255,255,255,0.1); color: #aaa; font-size: 11px; padding: 5px 15px; border-radius: 20px; text-transform: uppercase; letter-spacing: 1px; border: 1px solid #333; margin: 10px 0; }
        
        .chat-input-area { padding: 15px; border-top: 1px solid var(--border); display: flex; gap: 10px; background: #111; align-items: center; }
        
        /* ACTION MENU */
        .action-menu { position: absolute; bottom: 80px; left: 20px; background: #1a1a1a; border: 1px solid var(--gold); border-radius: 8px; padding: 10px; display: flex; flex-direction: column; gap: 5px; width: 200px; box-shadow: 0 10px 30px #000; animation: slideUp 0.2s ease-out; z-index: 50; }
        .action-item { padding: 10px; color: #fff; cursor: pointer; display: flex; align-items: center; gap: 10px; font-size: 13px; border-radius: 4px; }
        .action-item:hover { background: rgba(212, 175, 55, 0.2); color: var(--gold); }
        @keyframes slideUp { from{opacity:0;transform:translateY(10px);} to{opacity:1;transform:translateY(0);} }

        /* ‚îÄ‚îÄ‚îÄ MOBILE ‚îÄ‚îÄ‚îÄ */
        .bottom-nav { display: none; }
        @media (max-width: 768px) {
            .sidebar { display: none; }
            .bottom-nav { display: flex; position: fixed; bottom: 0; left: 0; right: 0; height: calc(65px + var(--safe-bottom)); background: #0a0a0a; border-top: 1px solid var(--border); z-index: 100; padding-bottom: var(--safe-bottom); }
            .nav-icon { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; color: #666; font-size: 10px; gap: 4px; }
            .nav-icon.active { color: var(--gold); }
            .nav-icon i { font-size: 20px; }
            .grid { grid-template-columns: 1fr 1fr; gap: 10px; }
            .card-img { height: 180px; }
            .chat-list { display: none; }
            .chat-list.mobile-show { display: block; width: 100%; }
            .chat-window.mobile-hide { display: none; }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        const { createClient } = supabase;

        // ‚îÄ‚îÄ‚îÄ SUPABASE ‚îÄ‚îÄ‚îÄ
        const client = createClient(
            "https://wtbswbokojmzmrehrajj.supabase.co", 
            "sb_publishable_WCwKS1Du4LePjpVqPLZQzA_dsPFbDbd"
        );

        // ‚îÄ‚îÄ‚îÄ MOCK DATA WITH TRAVEL ‚îÄ‚îÄ‚îÄ
        const INITIAL_MEMBERS = [
            { id: 101, name: "DallasCouple_99", type: "Couple (MF)", city: "Dallas", img: "https://images.unsplash.com/photo-1516589178581-6cd7833ae3b2?q=80&w=600", online: true },
            { id: 102, name: "SecretRose", type: "Female", city: "Plano", img: "https://images.unsplash.com/photo-1534528741775-53994a69daeb?q=80&w=600", online: false, travel: { dest: 'Miami', date: 'Oct 12-15' } },
            { id: 103, name: "FitGent_TX", type: "Male", city: "Frisco", img: "https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?q=80&w=600", online: true },
            { id: 104, name: "VelvetVixen", type: "Female", city: "Addison", img: "https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?q=80&w=600", online: true, travel: { dest: 'Vegas', date: 'Nov 2-5' } },
            { id: 105, name: "NightOwl_XX", type: "Couple (FF)", city: "Uptown", img: "https://images.unsplash.com/photo-1518556865737-124b89182352?q=80&w=600", online: false },
            { id: 106, name: "ThePlayboys", type: "Couple (MM)", city: "Oak Lawn", img: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?q=80&w=600", online: true, travel: { dest: 'Dallas', date: 'Visiting Now' } },
        ];

        function App() {
            // STATE
            const [user, setUser] = useState(null);
            const [view, setView] = useState('browse'); 
            const [activeChat, setActiveChat] = useState(null);
            const [chats, setChats] = useState({}); 
            const [members, setMembers] = useState(INITIAL_MEMBERS);
            const [step, setStep] = useState(0); 
            const [regData, setRegData] = useState({ type: 'Couple (MF)', city: 'Dallas', username: '' });
            const [showActions, setShowActions] = useState(false);
            const [myTrips, setMyTrips] = useState([]);

            // INIT
            useEffect(() => {
                const saved = localStorage.getItem('vc_user');
                if(saved) { setUser(JSON.parse(saved)); setStep(5); }
            }, []);

            // ACTIONS
            const handleReg = () => {
                const newUser = { ...regData, id: Date.now() };
                localStorage.setItem('vc_user', JSON.stringify(newUser));
                setUser(newUser);
                setStep(5);
            };

            const sendMessage = (txt, isSystem=false) => {
                if(!txt) return;
                const cid = activeChat.id;
                const newMsg = { text: txt, me: !isSystem, system: isSystem, ts: Date.now() };
                setChats(prev => ({ ...prev, [cid]: [...(prev[cid]||[]), newMsg] }));
                setShowActions(false);
            };

            const addTrip = (dest, dates) => {
                setMyTrips([...myTrips, { dest, dates }]);
                alert("Trip Announced to Community!");
            };

            // ‚îÄ‚îÄ‚îÄ RENDERERS ‚îÄ‚îÄ‚îÄ

            // FUNNEL (Steps 0-4)
            if(step < 5) return (
                <div className="funnel-container">
                    <div className="funnel-bg"></div>
                    <div className="funnel-overlay"></div>
                    {step === 0 && (
                        <div className="funnel-card text-center">
                            <h1 style={{fontSize:32}}>VELVET</h1>
                            <p style={{color:'#aaa', letterSpacing:2, marginBottom:40}}>MEMBERS ONLY</p>
                            <button className="btn-gold w-full" onClick={()=>setStep(1)}>ENTER</button>
                        </div>
                    )}
                    {/* Simplified Funnel for brevity - imagine Steps 1-4 here from previous code */}
                    {step > 0 && (
                        <div className="funnel-card">
                            <h3>Quick Access</h3>
                            <input className="input-field" placeholder="Username" onChange={e=>setRegData({...regData, username:e.target.value})} />
                            <button className="btn-gold w-full" onClick={handleReg}>CREATE PROFILE</button>
                        </div>
                    )}
                </div>
            );

            // APP DASHBOARD
            return (
                <div className="app-shell">
                    {/* SIDEBAR */}
                    <div className="sidebar">
                        <div style={{height:60, display:'flex', alignItems:'center', paddingLeft:25, borderBottom:'1px solid #222'}}>
                            <h3 style={{fontSize:18}}>VELVET</h3>
                        </div>
                        <div style={{padding:'20px 0'}}>
                            <div className={`nav-item ${view==='browse'?'active':''}`} onClick={()=>setView('browse')}><i className="fas fa-th-large"></i> Browse</div>
                            <div className={`nav-item ${view==='travel'?'active':''}`} onClick={()=>setView('travel')}><i className="fas fa-plane"></i> Travel Plans</div>
                            <div className={`nav-item ${view==='chat'?'active':''}`} onClick={()=>setView('chat')}><i className="fas fa-comment-alt"></i> Messages</div>
                            <div className={`nav-item ${view==='profile'?'active':''}`} onClick={()=>setView('profile')}><i className="fas fa-user-circle"></i> Profile</div>
                        </div>
                    </div>

                    {/* MAIN VIEW */}
                    <div className="main-view">
                        
                        {/* 1. BROWSE */}
                        {view === 'browse' && (
                            <>
                                <div className="top-bar"><h4>Members Nearby</h4></div>
                                <div className="content-scroll">
                                    <div className="grid">
                                        {members.map(m => (
                                            <div key={m.id} className="member-card" onClick={()=>{setActiveChat(m); setView('chat');}}>
                                                <img src={m.img} className="card-img" />
                                                <div className="card-info">
                                                    <div className="flex justify-between">
                                                        <h4 style={{color:'#fff', fontSize:14}}>{m.name}</h4>
                                                        {m.online && <div className="online-dot"></div>}
                                                    </div>
                                                    <div style={{color:'#aaa', fontSize:11}}>{m.type}</div>
                                                    {m.travel && <div className="travel-tag" style={{marginTop:5}}>‚úàÔ∏è {m.travel.dest}</div>}
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </>
                        )}

                        {/* 2. TRAVEL (New Feature) */}
                        {view === 'travel' && (
                            <>
                                <div className="top-bar"><h4>Jetset & Travel</h4></div>
                                <div className="content-scroll">
                                    <div style={{background:'#1a1a1a', padding:20, borderRadius:8, marginBottom:30, border:'1px solid var(--gold)'}}>
                                        <h3 style={{marginBottom:15}}>Announce a Trip</h3>
                                        <div className="flex gap-10">
                                            <input id="tripCity" className="input-field" style={{marginBottom:0}} placeholder="Destination City" />
                                            <input id="tripDate" className="input-field" style={{marginBottom:0}} placeholder="Dates (e.g. Oct 12-15)" />
                                        </div>
                                        <button className="btn-gold w-full" style={{marginTop:15}} onClick={()=>{
                                            addTrip(document.getElementById('tripCity').value, document.getElementById('tripDate').value);
                                        }}>POST TRAVEL PLANS</button>
                                    </div>

                                    <h4 style={{marginBottom:15, color:'#888'}}>INCOMING TO YOUR CITY</h4>
                                    <div className="grid">
                                        {members.filter(m => m.travel).map(m => (
                                            <div key={m.id} className="member-card">
                                                <div style={{padding:15, background:'#151515'}}>
                                                    <div style={{color:'var(--gold)', fontWeight:'bold', fontSize:16}}>{m.travel.dest}</div>
                                                    <div style={{color:'#fff', fontSize:12, marginBottom:10}}>{m.travel.date}</div>
                                                    <div className="flex gap-10">
                                                        <img src={m.img} style={{width:40, height:40, borderRadius:'50%'}} />
                                                        <div>
                                                            <div style={{color:'#fff'}}>{m.name}</div>
                                                            <div style={{color:'#666', fontSize:11}}>{m.type}</div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </>
                        )}

                        {/* 3. CHAT with SEXY INTERACTIONS */}
                        {view === 'chat' && (
                            <div className="chat-layout">
                                <div className={`chat-list ${!activeChat ? 'mobile-show' : ''}`}>
                                    {members.slice(0,5).map(m => (
                                        <div key={m.id} className="chat-item" onClick={()=>setActiveChat(m)}>
                                            <img src={m.img} style={{width:40, height:40, borderRadius:'50%'}} />
                                            <div>
                                                <div style={{color:'#fff'}}>{m.name}</div>
                                                <div style={{color:'#666', fontSize:11}}>Tap to chat</div>
                                            </div>
                                        </div>
                                    ))}
                                </div>

                                <div className={`chat-window ${!activeChat ? 'mobile-hide' : ''}`}>
                                    {activeChat ? (
                                        <>
                                            <div className="top-bar">
                                                <div className="flex gap-10">
                                                    <i className="fas fa-arrow-left" style={{color:'#888'}} onClick={()=>setActiveChat(null)}></i>
                                                    <span style={{color:'#fff', fontWeight:'bold'}}>{activeChat.name}</span>
                                                </div>
                                            </div>
                                            <div className="msg-area">
                                                {(chats[activeChat.id] || []).map((msg, i) => (
                                                    <div key={i} className={msg.system ? "msg-system" : `msg-bubble ${msg.me ? 'msg-me' : 'msg-them'}`}>
                                                        {msg.text}
                                                    </div>
                                                ))}
                                            </div>
                                            
                                            {/* SEXY ACTION MENU */}
                                            {showActions && (
                                                <div className="action-menu">
                                                    <div className="action-item" onClick={()=>sendMessage("Sent a Virtual Drink üç∏", true)}><i className="fas fa-glass-martini text-gold"></i> Send Drink</div>
                                                    <div className="action-item" onClick={()=>sendMessage("Requested Private Photos üì∏", true)}><i className="fas fa-camera text-gold"></i> Request Pics</div>
                                                    <div className="action-item" onClick={()=>sendMessage("Shared Private Key üóùÔ∏è", true)}><i className="fas fa-key text-gold"></i> Give Key</div>
                                                    <div className="action-item" onClick={()=>sendMessage("Sent a Wink üòâ", true)}><i className="fas fa-eye text-gold"></i> Wink</div>
                                                </div>
                                            )}

                                            <div className="chat-input-area">
                                                <button className="btn-icon" style={{background:showActions?'var(--gold)':'#333', color:showActions?'#000':'#gold'}} onClick={()=>setShowActions(!showActions)}>
                                                    <i className="fas fa-plus"></i>
                                                </button>
                                                <input id="chatIn" className="input-field" style={{marginBottom:0, borderRadius:20}} placeholder="Message..." />
                                                <button className="btn-icon" onClick={()=>{
                                                    const el = document.getElementById('chatIn');
                                                    sendMessage(el.value);
                                                    el.value='';
                                                }}><i className="fas fa-paper-plane"></i></button>
                                            </div>
                                        </>
                                    ) : (
                                        <div className="flex-center" style={{height:'100%', color:'#444'}}>Select a conversation</div>
                                    )}
                                </div>
                            </div>
                        )}

                        {/* 4. PROFILE */}
                        {view === 'profile' && (
                            <div className="content-scroll text-center" style={{paddingTop:50}}>
                                <div style={{width:100, height:100, borderRadius:'50%', background:'#222', border:'2px solid var(--gold)', margin:'0 auto', display:'flex', alignItems:'center', justifyContent:'center'}}>
                                    <span style={{fontSize:40}}>{user?.username?.[0]}</span>
                                </div>
                                <h2 style={{marginTop:20}}>{user?.username}</h2>
                                <p style={{color:'var(--gold)'}}>Premium Member</p>
                                
                                <div style={{marginTop:30, textAlign:'left'}}>
                                    <h4>MY TRAVEL PLANS</h4>
                                    {myTrips.length === 0 && <p style={{color:'#666'}}>No upcoming trips.</p>}
                                    {myTrips.map((t,i) => (
                                        <div key={i} style={{padding:15, background:'#1a1a1a', borderLeft:'3px solid var(--gold)', marginBottom:10}}>
                                            <div style={{color:'#fff'}}>{t.dest}</div>
                                            <div style={{color:'#888', fontSize:12}}>{t.dates}</div>
                                        </div>
                                    ))}
                                </div>
                                <button className="btn-gold" style={{marginTop:40}} onClick={()=>{localStorage.removeItem('vc_user'); setStep(0);}}>LOG OUT</button>
                            </div>
                        )}

                    </div>

                    {/* MOBILE BOTTOM NAV */}
                    <div className="bottom-nav">
                        <div className={`nav-icon ${view==='browse'?'active':''}`} onClick={()=>setView('browse')}><i className="fas fa-th-large"></i></div>
                        <div className={`nav-icon ${view==='travel'?'active':''}`} onClick={()=>setView('travel')}><i className="fas fa-plane"></i></div>
                        <div className={`nav-icon ${view==='chat'?'active':''}`} onClick={()=>setView('chat')}><i className="fas fa-comment-alt"></i></div>
                        <div className={`nav-icon ${view==='profile'?'active':''}`} onClick={()=>setView('profile')}><i className="fas fa-user"></i></div>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
